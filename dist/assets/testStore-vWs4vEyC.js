import{r as A,g as P,R as j,_ as q}from"./index-DgOJs5V6.js";const F={},I=t=>{let s;const e=new Set,r=(v,g)=>{const c=typeof v=="function"?v(s):v;if(!Object.is(c,s)){const i=s;s=g??(typeof c!="object"||c===null)?c:Object.assign({},s,c),e.forEach(m=>m(s,i))}},o=()=>s,p={setState:r,getState:o,getInitialState:()=>f,subscribe:v=>(e.add(v),()=>e.delete(v)),destroy:()=>{(F?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},f=s=t(r,o,p);return p},O=t=>t?I(t):I;var Q={exports:{}},R={},C={exports:{}},$={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=A;function H(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var N=typeof Object.is=="function"?Object.is:H,k=w.useState,U=w.useEffect,M=w.useLayoutEffect,W=w.useDebugValue;function G(t,s){var e=s(),r=k({inst:{value:e,getSnapshot:s}}),o=r[0].inst,n=r[1];return M(function(){o.value=e,o.getSnapshot=s,b(o)&&n({inst:o})},[t,e,s]),U(function(){return b(o)&&n({inst:o}),t(function(){b(o)&&n({inst:o})})},[t]),W(e),e}function b(t){var s=t.getSnapshot;t=t.value;try{var e=s();return!N(t,e)}catch{return!0}}function J(t,s){return s()}var B=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J:G;$.useSyncExternalStore=w.useSyncExternalStore!==void 0?w.useSyncExternalStore:B;C.exports=$;var Y=C.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E=A,K=Y;function X(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Z=typeof Object.is=="function"?Object.is:X,V=K.useSyncExternalStore,ee=E.useRef,te=E.useEffect,re=E.useMemo,ne=E.useDebugValue;R.useSyncExternalStoreWithSelector=function(t,s,e,r,o){var n=ee(null);if(n.current===null){var d={hasValue:!1,value:null};n.current=d}else d=n.current;n=re(function(){function p(i){if(!f){if(f=!0,v=i,i=r(i),o!==void 0&&d.hasValue){var m=d.value;if(o(m,i))return g=m}return g=i}if(m=g,Z(v,i))return m;var u=r(i);return o!==void 0&&o(m,u)?(v=i,m):(v=i,g=u)}var f=!1,v,g,c=e===void 0?null:e;return[function(){return p(s())},c===null?void 0:function(){return p(c())}]},[s,e,r,o]);var h=V(t,n[0],n[1]);return te(function(){d.hasValue=!0,d.value=h},[h]),ne(h),h};Q.exports=R;var se=Q.exports;const oe=P(se),z={},{useDebugValue:ie}=j,{useSyncExternalStoreWithSelector:ae}=oe;let _=!1;const ue=t=>t;function le(t,s=ue,e){(z?"production":void 0)!=="production"&&e&&!_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),_=!0);const r=ae(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,e);return ie(r),r}const T=t=>{(z?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof t=="function"?O(t):t,e=(r,o)=>le(s,r,o);return Object.assign(e,s),e},ce=t=>t?T(t):T,de={};function fe(t,s){let e;try{e=t()}catch{return}return{getItem:o=>{var n;const d=p=>p===null?null:JSON.parse(p,void 0),h=(n=e.getItem(o))!=null?n:null;return h instanceof Promise?h.then(d):d(h)},setItem:(o,n)=>e.setItem(o,JSON.stringify(n,void 0)),removeItem:o=>e.removeItem(o)}}const x=t=>s=>{try{const e=t(s);return e instanceof Promise?e:{then(r){return x(r)(e)},catch(r){return this}}}catch(e){return{then(r){return this},catch(r){return x(r)(e)}}}},me=(t,s)=>(e,r,o)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:l=>l,version:0,merge:(l,S)=>({...S,...l}),...s},d=!1;const h=new Set,p=new Set;let f;try{f=n.getStorage()}catch{}if(!f)return t((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...l)},r,o);const v=x(n.serialize),g=()=>{const l=n.partialize({...r()});let S;const a=v({state:l,version:n.version}).then(y=>f.setItem(n.name,y)).catch(y=>{S=y});if(S)throw S;return a},c=o.setState;o.setState=(l,S)=>{c(l,S),g()};const i=t((...l)=>{e(...l),g()},r,o);let m;const u=()=>{var l;if(!f)return;d=!1,h.forEach(a=>a(r()));const S=((l=n.onRehydrateStorage)==null?void 0:l.call(n,r()))||void 0;return x(f.getItem.bind(f))(n.name).then(a=>{if(a)return n.deserialize(a)}).then(a=>{if(a)if(typeof a.version=="number"&&a.version!==n.version){if(n.migrate)return n.migrate(a.state,a.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return a.state}).then(a=>{var y;return m=n.merge(a,(y=r())!=null?y:i),e(m,!0),g()}).then(()=>{S==null||S(m,void 0),d=!0,p.forEach(a=>a(m))}).catch(a=>{S==null||S(void 0,a)})};return o.persist={setOptions:l=>{n={...n,...l},l.getStorage&&(f=l.getStorage())},clearStorage:()=>{f==null||f.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>u(),hasHydrated:()=>d,onHydrate:l=>(h.add(l),()=>{h.delete(l)}),onFinishHydration:l=>(p.add(l),()=>{p.delete(l)})},u(),m||i},ve=(t,s)=>(e,r,o)=>{let n={storage:fe(()=>localStorage),partialize:u=>u,version:0,merge:(u,l)=>({...l,...u}),...s},d=!1;const h=new Set,p=new Set;let f=n.storage;if(!f)return t((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...u)},r,o);const v=()=>{const u=n.partialize({...r()});return f.setItem(n.name,{state:u,version:n.version})},g=o.setState;o.setState=(u,l)=>{g(u,l),v()};const c=t((...u)=>{e(...u),v()},r,o);o.getInitialState=()=>c;let i;const m=()=>{var u,l;if(!f)return;d=!1,h.forEach(a=>{var y;return a((y=r())!=null?y:c)});const S=((l=n.onRehydrateStorage)==null?void 0:l.call(n,(u=r())!=null?u:c))||void 0;return x(f.getItem.bind(f))(n.name).then(a=>{if(a)if(typeof a.version=="number"&&a.version!==n.version){if(n.migrate)return[!0,n.migrate(a.state,a.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,a.state];return[!1,void 0]}).then(a=>{var y;const[L,D]=a;if(i=n.merge(D,(y=r())!=null?y:c),e(i,!0),L)return v()}).then(()=>{S==null||S(i,void 0),i=r(),d=!0,p.forEach(a=>a(i))}).catch(a=>{S==null||S(void 0,a)})};return o.persist={setOptions:u=>{n={...n,...u},u.storage&&(f=u.storage)},clearStorage:()=>{f==null||f.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>m(),hasHydrated:()=>d,onHydrate:u=>(h.add(u),()=>{h.delete(u)}),onFinishHydration:u=>(p.add(u),()=>{p.delete(u)})},n.skipHydration||m(),i||c},he=(t,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((de?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),me(t,s)):ve(t,s),ge=he,Se=ce()(ge((t,s)=>({allQuestions:[],questions:[],currentQuestionIndex:0,currentPhase:null,currentLevel:null,answers:[],isTestStarted:!1,isTestCompleted:!1,result:null,isLoadingQuestions:!1,errorLoadingQuestions:null,isDemoMode:!1,startTest:(e,r)=>{const{allQuestions:o}=s();let n=o.filter(d=>d.phase===e);if(e==="spot"&&r&&(n=n.filter(d=>d.level===r)),n.length===0){console.warn(`No questions found for phase: ${e}`+(r?` and level: ${r}`:"")),t({questions:[],currentPhase:e,currentLevel:e==="spot"&&r||null,currentQuestionIndex:0,answers:[],isTestStarted:!1,isTestCompleted:!1,result:null});return}t({questions:n,currentPhase:e,currentLevel:e==="spot"&&r||null,isTestStarted:!0,isTestCompleted:!1,currentQuestionIndex:0,answers:[],result:null})},nextQuestion:()=>{const{currentQuestionIndex:e,questions:r}=s();e<r.length-1&&t({currentQuestionIndex:e+1})},previousQuestion:()=>{const{currentQuestionIndex:e}=s();e>0&&t({currentQuestionIndex:e-1})},answerQuestion:e=>{const{answers:r}=s(),o=r.findIndex(d=>d.questionId===e.questionId);let n;o>=0?(n=[...r],n[o]=e):n=[...r,e],t({answers:n})},completeTest:()=>{const e=s().calculateResult(),r=s().generateShareableCard(e);t({isTestCompleted:!0,result:{...e,shareableCardUrl:r}})},resetTest:()=>t({currentQuestionIndex:0,answers:[],isTestStarted:!1,isTestCompleted:!1,result:null,currentPhase:null,currentLevel:null}),clearTestData:()=>{localStorage.removeItem("test-progress"),window.location.reload()},loadQuestions:async()=>{t({isLoadingQuestions:!0,errorLoadingQuestions:null});try{const e=await q(()=>import("./questions-B0HBO5vO.js"),[]),r=e.default||e;let o;if(r&&Array.isArray(r.questions))o=r.questions;else if(Array.isArray(r))o=r;else throw console.error("Invalid questions.json structure:",r),new Error('Invalid questions.json structure. Expected an object with a "questions" array or an array of questions.');t({allQuestions:o,isLoadingQuestions:!1})}catch(e){console.error("Failed to load questions:",e),t({errorLoadingQuestions:e instanceof Error?e.message:"Unknown error loading questions",isLoadingQuestions:!1})}},calculateResult:()=>{const{answers:e,questions:r}=s(),o=e.reduce((c,i)=>c+i.score,0),n=r.reduce((c,i)=>{if(!i.options||i.options.length===0)return c;const m=Math.max(...i.options.map(u=>u.score||0));return c+(m>0?m:0)},0),d=e.filter(c=>{const i=r.find(m=>m.id===c.questionId);return(i==null?void 0:i.phase)==="spot"}),h=e.filter(c=>{const i=r.find(m=>m.id===c.questionId);return(i==null?void 0:i.phase)==="end"}),p=d.reduce((c,i)=>c+i.score,0),f=h.reduce((c,i)=>c+i.score,0),v=o/n*100;let g="";return v>=80?g="Excellent! You have a strong understanding of how to identify and stop sexualised violence in sport.":v>=60?g="Good awareness! There are still some areas where you can improve your knowledge.":v>=40?g="You have some knowledge, but there's room for significant improvement in recognizing warning signs.":g="This is an important learning opportunity. We encourage you to explore our resources to better understand the signs.",{totalScore:o,maxScore:n,spotScore:p,endScore:f,feedback:g}},generateShareableCard:e=>{const r=Math.round(e.totalScore/e.maxScore*100),o=r>=80?"Ausgezeichnet":r>=60?"Gut":r>=40?"Ausreichend":"Verbesserungsbedarf",n=r>=80?"#22C55E":r>=60?"#EAB308":r>=40?"#F97316":"#EF4444",d=`
        <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="630" viewBox="0 0 1200 630">
          <rect width="1200" height="630" fill="#0A1E3F"/>
          <text x="600" y="200" font-family="Arial, sans-serif" font-size="60" font-weight="bold" fill="white" text-anchor="middle">ERKENNEN. STOPPEN.</text>
          <text x="600" y="300" font-family="Arial, sans-serif" font-size="48" fill="white" text-anchor="middle">Ich habe ${r}% erreicht</text>
          <text x="600" y="380" font-family="Arial, sans-serif" font-size="36" fill="${n}" text-anchor="middle">${o}</text>
          <text x="600" y="480" font-family="Arial, sans-serif" font-size="24" fill="white" text-anchor="middle">Teste dein Wissen zur Prävention von</text>
          <text x="600" y="520" font-family="Arial, sans-serif" font-size="24" fill="white" text-anchor="middle">sexualisierter Gewalt im Sport</text>
        </svg>`;return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(d)}`}}),{name:"test-progress",version:1,partialize:t=>({answers:t.answers,currentQuestionIndex:t.currentQuestionIndex,isTestStarted:t.isTestStarted,isTestCompleted:t.isTestCompleted,result:t.result})}));export{Se as u};
