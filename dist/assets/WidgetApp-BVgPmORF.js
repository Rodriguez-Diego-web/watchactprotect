import{R as n,j as r,c as d}from"./index-CesDyvRg.js";import{T as c}from"./TestShell-C0UTIYzp.js";import{u as i}from"./testStore-B6qyTNA8.js";import"./createLucideIcon-DyfPgvOr.js";import"./download-CPVpN1lM.js";const m=()=>{const t=new URLSearchParams(window.location.search).get("config");if(t)try{return JSON.parse(decodeURIComponent(t))}catch(o){console.warn("Failed to parse widget config:",o)}return{}},l=e=>{const t=document.documentElement;e.primaryColor&&t.style.setProperty("--widget-primary",e.primaryColor),e.secondaryColor&&t.style.setProperty("--widget-secondary",e.secondaryColor),e.theme==="dark"&&document.body.classList.add("dark")},a=()=>{const{result:e,isTestCompleted:t}=i();return n.useEffect(()=>{if(t&&e){const o={type:"SPOT_IT_STOP_IT_COMPLETE",result:{score:e.totalScore,maxScore:e.maxScore,percentage:Math.round(e.totalScore/e.maxScore*100),feedback:e.feedback}};window.parent!==window&&window.parent.postMessage(o,"*"),window.dispatchEvent(new CustomEvent("spotItStopItComplete",{detail:o.result}))}},[t,e]),r.jsx("div",{className:"widget-container p-4",children:r.jsx(c,{embedded:!0})})},s=()=>{const e=m();l(e);const t=document.getElementById("widget-root")||document.body;d.createRoot(t).render(r.jsx(n.StrictMode,{children:r.jsx(a,{})}))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s();const f=()=>r.jsx(a,{});export{f as default};
